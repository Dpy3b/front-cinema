(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[389],{36139:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/favorites",function(){return r(77881)}])},77366:function(t,e,r){"use strict";var n=r(85893);e.Z=function(){return(0,n.jsx)("div",{className:"mt-11 bg-gray-700 bg-opacity-20 py-3 px-5 rounded-lg text-white text-opacity-80",children:"For viewing favorites plz autorize!"})}},90528:function(t,e,r){"use strict";r.d(e,{r:function(){return a}});var n=r(88767),i=r(95163),o=r(51163),a=function(){var t=(0,o.a)().user,e=(0,n.useQuery)("Favorite movies",(function(){return i.K.getFavorites()}),{select:function(t){return t.data},enabled:!!t});return{isLoading:e.isLoading,favoritesMovies:e.data,refetch:e.refetch}}},58815:function(t,e,r){"use strict";r.d(e,{Z:function(){return m}});var n=r(85893),i=r(94184),o=r.n(i),a=r(67294),u=r(88767),c=r(95163),s=r(75777),f="/_next/static/media/heart-animation.45ff2efe.png",l=r(90528),p=r(85386),d=r.n(p),v=r(51163);var m=function(t){var e=t.movieId;if(!(0,v.a)().user)return null;var r=(0,a.useState)(!1),i=r[0],p=r[1],m=(0,l.r)(),x=m.favoritesMovies,h=m.refetch;(0,a.useEffect)((function(){if(x){var t=x.some((function(t){return t._id===e}));i!==t&&p(t)}}),[x,i,e]);var _,g,j,F=(0,u.useMutation)("update actor",(function(){return c.K.toggleFavorite(e)}),{onError:function(t){(0,s._)(t,"Update favorite list")},onSuccess:function(){p(!i),h()}}).mutateAsync;return(0,n.jsx)("button",{onClick:function(){return F()},className:o()(d().button,(_={},g=d().animate,j=i,g in _?Object.defineProperty(_,g,{value:j,enumerable:!0,configurable:!0,writable:!0}):_[g]=j,_)),style:{backgroundImage:"url(".concat(f,")")}})}},62289:function(t,e,r){"use strict";var n=r(85893);e.Z=function(t){var e=t.title,r=t.className,i=void 0===r?"":r;return(0,n.jsx)("h1",{className:"text-white text-opacity-80 font-semibold ".concat(i.includes("xl")?"":"text-3xl"," ").concat(i),children:e})}},95163:function(t,e,r){"use strict";r.d(e,{K:function(){return s}});var n=r(34051),i=r.n(n),o=r(84714),a=r(33739);function u(t,e,r,n,i,o,a){try{var u=t[o](a),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,i)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){u(o,n,i,a,c,"next",t)}function c(t){u(o,n,i,a,c,"throw",t)}a(void 0)}))}}var s={getProfile:function(){return c(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.Z.get((0,a.Il)("/profile")));case 1:case"end":return t.stop()}}),t)})))()},updateProfile:function(t){return c(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.Z.put((0,a.Il)("/profile"),t));case 1:case"end":return e.stop()}}),e)})))()},getUsers:function(t){return c(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.Z.get((0,a.Il)(""),{params:t?{searchTerm:t}:{}}));case 1:case"end":return e.stop()}}),e)})))()},getUser:function(t){return c(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.Z.get((0,a.Il)("/".concat(t))));case 1:case"end":return e.stop()}}),e)})))()},updateUser:function(t,e){return c(i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",o.Z.put((0,a.Il)("/".concat(t)),e));case 1:case"end":return r.stop()}}),r)})))()},deleteUser:function(t){return c(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.Z.delete((0,a.Il)("/".concat(t))));case 1:case"end":return e.stop()}}),e)})))()},getFavorites:function(){return c(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.Z.get((0,a.Il)("/profile/favorites")));case 1:case"end":return t.stop()}}),t)})))()},toggleFavorite:function(t){return c(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.Z.post((0,a.Il)("/profile/favorites"),{movieId:t}));case 1:case"end":return e.stop()}}),e)})))()}}},71499:function(t,e,r){"use strict";r.d(e,{h:function(){return f},$:function(){return l}});var n=r(85893),i=r(9008),o=r(11163),a="Movie app",u=function(t){return"".concat(t," | ").concat(a)},c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=t.replace(/<[^>]+>/g,"").replace(/&[^;]+./g," ").replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"");return e&&(r=r.slice(0,e)+"..."),r},s=r(79247),f=function(t){var e=t.title,r=t.description,f=t.image,p=void 0===f?null:f,d=t.children,v=(0,o.useRouter)().asPath,m="".concat("http://localhost:3000").concat(v);return(0,n.jsxs)(n.Fragment,{children:[r?(0,n.jsxs)(i.default,{children:[(0,n.jsx)("title",{itemProp:"headline",children:u(e)}),(0,n.jsx)("meta",{itemProp:"description",name:"description",content:c(r,152)}),(0,n.jsx)("link",{rel:"canonical",href:m}),(0,n.jsx)("meta",{property:"og:locale",content:"en"}),(0,n.jsx)("meta",{property:"og:title",content:u(e)}),(0,n.jsx)("meta",{property:"og:url",content:m}),(0,n.jsx)("meta",{property:"og:image",content:p||s.Z}),(0,n.jsx)("meta",{property:"og:site_name",content:a}),(0,n.jsx)("meta",{property:"og:description",content:c(r,197)})]}):(0,n.jsx)(l,{title:e}),d]})},l=function(t){var e=t.title,r=void 0===e?"Error":e;return(0,n.jsxs)(i.default,{children:[(0,n.jsx)("title",{children:u(r)}),(0,n.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]})}},77881:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return _}});var n=r(85893),i=r(62289),o=r(6884),a=r(71499),u=r(60590),c=r(25675),s=r(41664),f=r(51163),l=r(58815),p=r(48570),d=r.n(p),v=function(t){var e=t.item,r=(0,f.a)().user;return(0,n.jsxs)("div",{className:d().itemWrapper,children:[r&&(0,n.jsx)(l.Z,{movieId:e._id}),(0,n.jsx)(s.default,{href:e.url,children:(0,n.jsxs)("a",{className:d().item,children:[(0,n.jsx)(c.default,{alt:e.name,src:e.posterPath,layout:"fill",draggable:!1,priority:!0}),(0,n.jsx)("div",{className:d().title,children:e.title})]})})]})},m=r(90528),x=r(77366),h=function(){if(!(0,f.a)().user)return(0,n.jsx)(x.Z,{});var t=(0,m.r)(),e=t.favoritesMovies,r=t.isLoading;return(0,n.jsxs)(a.h,{title:"Favorites",children:[(0,n.jsx)(i.Z,{title:"Favorites"}),(0,n.jsx)("section",{className:d().favorites,children:r?(0,n.jsx)(o.Z,{count:3,className:d().skeletonLoader,containerClassName:d().containerLoader}):null===e||void 0===e?void 0:e.map((function(t){return(0,n.jsx)(v,{item:{name:t.title,posterPath:t.bigPoster,url:(0,u.Xl)(t.slug),title:t.title,_id:t._id}},t._id)}))})]})},_=function(){return(0,n.jsx)(h,{})}},48570:function(t){t.exports={favorites:"Favorites_favorites__jA0hJ",containerLoader:"Favorites_containerLoader__48q7J",skeletonLoader:"Favorites_skeletonLoader__k25df",itemWrapper:"Favorites_itemWrapper__O7aiB",fade:"Favorites_fade__XNhas",item:"Favorites_item__olMgf",title:"Favorites_title__2ucxx"}},85386:function(t){t.exports={button:"FavoriteButton_button__4HnpL",animate:"FavoriteButton_animate__4b8kX","heart-burst":"FavoriteButton_heart-burst__jgos5"}}},function(t){t.O(0,[774,888,179],(function(){return e=36139,t(t.s=e);var e}));var e=t.O();_N_E=e}]);